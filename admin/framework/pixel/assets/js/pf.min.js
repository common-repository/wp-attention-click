(function($,window,document,undefined){"use strict";var PF=PF||{};PF.vars={onloaded:!1,$body:$("body"),$window:$(window),$document:$(document),is_rtl:$("body").hasClass("rtl"),code_themes:[]},PF.funcs={},PF.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function(e,t){var n=new RegExp("("+PF.helper.preg_quote(t)+")\\[(\\d+)\\]","g");e.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),e.each(function(e){$(this).find(":input").each(function(){this.name=this.name.replace(n,t+"["+e+"]"),this.orginal_checked&&(this.checked=!0)})})},get_cookie:function(e){var t,n,i=document.cookie,a=e+"=";if(i){if(n=i.indexOf("; "+a),-1===n){if(n=i.indexOf(a),0!==n)return null}else n+=2;return t=i.indexOf(";",n),-1===t&&(t=i.length),decodeURIComponent(i.substring(n+a.length,t))}},set_cookie:function(e,t,n,i,a,r){var o=new Date;"object"==typeof n&&n.toGMTString?n=n.toGMTString():parseInt(n,10)?(o.setTime(o.getTime()+1e3*parseInt(n,10)),n=o.toGMTString()):n="",document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+n:"")+(i?"; path="+i:"")+(a?"; domain="+a:"")+(r?"; secure":"")},remove_cookie:function(e,t,n,i){PF.helper.set_cookie(e,"",-1e3,t,n,i)},debounce:function(e,t,n){var i;return function(){var a=this,r=arguments,o=function(){i=null,n||e.apply(a,r)},f=n&&!i;clearTimeout(i),i=setTimeout(o,t),f&&e.apply(a,r)}},fix:function(obj){for(var property in obj)obj.hasOwnProperty(property)&&(obj[property]=eval("("+obj[property]+")"))}},$.fn.pf_nav_options=function(){var e=$(".pf").data("unique");return $(".pf.pf-"+e+" .pf-nav-options a.nav-tab").on("click",function(){var t=$(this).attr("data-tab-id");PF.helper.set_cookie("pf-last-options-tab-"+e,t)}),this.each(function(){var e=$(this),t=e.find("a"),n=e.closest(".pf").find(".pf-section-id"),i=null;$(window).on("hashchange",function(){var e=window.location.hash.match(new RegExp("tab=([^&]*)")),a=e?e[1]:t.first().attr("href").replace("#tab=",""),r=$("#pf-tab-link-"+(e?a:1));if(r.length>0){r.closest(".pf-tab-depth-0").find("a.nav-tab").addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t.removeClass("pf-section-active"),t.removeClass("nav-tab-active"),r.addClass("pf-section-active"),r.addClass("nav-tab-active");var o=r.closest(".pf-tab-depth-0");o.children("a.nav-tab").length>0&&(o.children("a.nav-tab").addClass("pf-section-active nav-tab-active"),o.addClass("nav-tab-parent-active").siblings().removeClass("nav-tab-parent-active")),i!==undefined&&$(i).hide();var f=$("#pf-section-"+a);f.css({display:"block"}),f.pf_reload_script(),n.val(a),i=f}}).trigger("hashchange")})},$.fn.pf_clone=function(){for(var e=$.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),n=e.find("select").add(e.filter("select")),i=0;i<t.length;++i)for(var a=0;a<t[i].options.length;++a)!0===t[i].options[a].selected&&(n[i].options[a].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),e},$.fn.pf_checkbox=function(){return this.each(function(){var e=$(this),t=e.find(".pf--input"),n=e.find(".pf--checkbox");n.on("click",function(){t.val(Number(n.prop("checked"))).trigger("change")})})},$.fn.pf_field_repeater=function(){return this.each(function(){var e=$(this),t=e.children(".pf-fieldset"),n=t.children(".pf-repeater-wrapper"),i=t.children(".pf-repeater-hidden"),a=t.children(".pf-repeater-max"),r=t.children(".pf-repeater-min"),o=n.data("field-id"),f=n.data("unique-id"),l=parseInt(n.data("max")),d=parseInt(n.data("min"));n.children(".pf-repeater-item").children(".pf-repeater-content").pf_reload_script(),n.sortable({axis:"y",handle:".pf-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){PF.helper.name_nested_replace(n.children(".pf-repeater-item"),o),n.pf_customizer_refresh(),t.item.pf_reload_script_retry()}}),t.children(".pf-repeater-add").on("click",function(e){e.preventDefault();var t=n.children(".pf-repeater-item").length;if(r.hide(),l&&t+1>l)a.show();else{var d=f+o+"["+t+"]";console.log(t);var p=i.pf_clone(!0);p.removeClass("pf-repeater-hidden"),p.find(":input").each(function(){this.name=d+this.name.replace(this.name.startsWith("_nonce")?"_nonce":f,"")}),p.find(".pf-data-wrapper").each(function(){$(this).attr("data-unique-id",d)}),n.append(p),p.children(".pf-repeater-content").pf_reload_script(),n.pf_customizer_refresh(),n.pf_customizer_listen({closest:!0})}});var p=function(e){e.preventDefault();var t=n.children(".pf-repeater-item").length;if(r.hide(),l&&t+1>l)a.show();else{var i=$(this),f=i.parent().parent().parent(),d=f.children(".pf-repeater-content").pf_clone(),p=f.children(".pf-repeater-helper").pf_clone(!0),s=new RegExp("("+PF.helper.preg_quote(o)+")\\[(\\d+)\\]","g");d.find(".pf-data-wrapper").each(function(){var e=$(this);e.attr("data-unique-id",e.attr("data-unique-id").replace(s,o+"["+(f.index()+1)+"]"))});var c=$('<div class="pf-repeater-item" />');c.append(d),c.append(p),n.children().eq(f.index()).after(c),c.children(".pf-repeater-content").pf_reload_script(),PF.helper.name_nested_replace(n.children(".pf-repeater-item"),o),n.pf_customizer_refresh(),n.pf_customizer_listen({closest:!0})}};n.children(".pf-repeater-item").children(".pf-repeater-helper").on("click",".pf-repeater-clone",p),t.children(".pf-repeater-hidden").children(".pf-repeater-helper").on("click",".pf-repeater-clone",p);var s=function(e){e.preventDefault();var t=n.children(".pf-repeater-item").length;a.hide(),r.hide(),d&&t-1<d?r.show():($(this).closest(".pf-repeater-item").remove(),PF.helper.name_nested_replace(n.children(".pf-repeater-item"),o),n.pf_customizer_refresh())};n.children(".pf-repeater-item").children(".pf-repeater-helper").on("click",".pf-repeater-remove",s),t.children(".pf-repeater-hidden").children(".pf-repeater-helper").on("click",".pf-repeater-remove",s)})},$.fn.pf_field_group=function(){return this.each(function(){var e=$(this),t=e.children(".pf-fieldset"),n=t.length?t:e,i=t.children(".pf-cloneable-wrapper"),a=t.children(".pf-cloneable-hidden"),r=t.children(".pf-cloneable-max"),o=t.children(".pf-cloneable-min"),f=i.data("field-id"),l=i.data("unique-id"),d=Boolean(Number(i.data("title-number"))),p=parseInt(i.data("max")),s=parseInt(i.data("min"));i.hasClass("ui-accordion")&&i.find(".ui-accordion-header-icon").remove();var c=function(e){e.find(".pf-cloneable-title-number").each(function(e){$(this).html($(this).closest(".pf-cloneable-item").index()+1+".")})};i.accordion({header:"> .pf-cloneable-item > .pf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"pf-cloneable-header-icon fa fa-angle-right",activeHeader:"pf-cloneable-header-icon fa fa-angle-down"},activate:function(e,t){var n=t.newPanel,i=t.newHeader;if(n.length&&!n.data("opened")){var a=n.children(),r=a.first().find(":input").first(),o=i.find(".pf-cloneable-value");r.on("keyup",function(e){o.text(r.val())}),n.pf_reload_script(),n.data("opened",!0),n.data("retry",!1)}else n.data("retry")&&(n.pf_reload_script_retry(),n.data("retry",!1))}}),i.sortable({axis:"y",handle:".pf-cloneable-title,.pf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){i.accordion({active:!1}),i.sortable("refreshPositions"),t.item.children(".pf-cloneable-content").data("retry",!0)},update:function(e,t){PF.helper.name_nested_replace(i.children(".pf-cloneable-item"),f),i.pf_customizer_refresh(),d&&c(i)}}),n.children(".pf-cloneable-add").on("click",function(e){e.preventDefault();var t=i.children(".pf-cloneable-item").length;if(o.hide(),p&&t+1>p)r.show();else{var n=l+f+"["+t+"]",s=a.pf_clone(!0);s.removeClass("pf-cloneable-hidden"),s.find(":input").each(function(){this.name=n+this.name.replace(this.name.startsWith("_nonce")?"_nonce":l,"")}),s.find(".pf-data-wrapper").each(function(){$(this).attr("data-unique-id",n)}),i.append(s),i.accordion("refresh"),i.accordion({active:t}),i.pf_customizer_refresh(),i.pf_customizer_listen({closest:!0}),d&&c(i)}});var h=function(e){e.preventDefault();var t=i.children(".pf-cloneable-item").length;if(o.hide(),p&&t+1>p)r.show();else{var n=$(this),a=n.parent().parent(),l=a.children(".pf-cloneable-helper").pf_clone(!0),s=a.children(".pf-cloneable-title").pf_clone(),h=a.children(".pf-cloneable-content").pf_clone(),u=new RegExp("("+PF.helper.preg_quote(f)+")\\[(\\d+)\\]","g");h.find(".pf-data-wrapper").each(function(){var e=$(this);e.attr("data-unique-id",e.attr("data-unique-id").replace(u,f+"["+(a.index()+1)+"]"))});var v=$('<div class="pf-cloneable-item" />');v.append(l),v.append(s),v.append(h),i.children().eq(a.index()).after(v),PF.helper.name_nested_replace(i.children(".pf-cloneable-item"),f),i.accordion("refresh"),i.pf_customizer_refresh(),i.pf_customizer_listen({closest:!0}),d&&c(i)}};i.children(".pf-cloneable-item").children(".pf-cloneable-helper").on("click",".pf-cloneable-clone",h),n.children(".pf-cloneable-hidden").children(".pf-cloneable-helper").on("click",".pf-cloneable-clone",h);var u=function(e){e.preventDefault();var t=i.children(".pf-cloneable-item").length;r.hide(),o.hide(),s&&t-1<s?o.show():($(this).closest(".pf-cloneable-item").remove(),PF.helper.name_nested_replace(i.children(".pf-cloneable-item"),f),i.pf_customizer_refresh(),d&&c(i))};i.children(".pf-cloneable-item").children(".pf-cloneable-helper").on("click",".pf-cloneable-remove",u),n.children(".pf-cloneable-hidden").children(".pf-cloneable-helper").on("click",".pf-cloneable-remove",u)})},$.fn.pf_field_accordion=function(){return this.each(function(){var e=$(this).find(".pf-accordion-title"),t=$(this).find(".pf-accordion-items");t.find(".pf-accordion-item").each(function(){$(this).hasClass("pf-accordion-item-open")&&$(this).find(".pf-accordion-open").pf_reload_script()}),e.on("click",function(){var e=$(this),n=e.find(".pf-accordion-icon"),i=e.next(),a=e.parent().data("id"),r=e.closest(".pf-accordion-items.pf-accordion-collapsible").length;n.hasClass("fa-angle-right")?n.removeClass("fa-angle-right").addClass("fa-angle-down"):n.removeClass("fa-angle-down").addClass("fa-angle-right"),r?t.find(".pf-accordion-item").each(function(){a!=$(this).data("id")&&($(this).find(".pf-accordion-title").removeClass("pf-accordion-open-title"),$(this).find(".pf-accordion-content").removeClass("pf-accordion-open"))}):i.data("opened")||i.data("opened",!0),e.toggleClass("pf-accordion-open-title"),i.toggleClass("pf-accordion-open"),i.pf_reload_script()})})},$.fn.pf_field_tab=function(){return this.each(function(){var e=$(this),t=e.find(".pf-tab-nav a"),n=e.find(".pf-tab-section");n.eq(0).pf_reload_script(),t.on("click",function(e){e.preventDefault();var t=$(this),i=t.index(),a=n.eq(i);t.addClass("pf-tab-active").siblings().removeClass("pf-tab-active"),a.pf_reload_script(),a.removeClass("hidden").siblings().addClass("hidden")})})},$.fn.pf_field_fieldset=function(){return this.each(function(){$(this).find(".pf-fieldset-content").pf_reload_script()})},$.fn.pf_field_wp_editor=function(){return this.each(function(){if(void 0!==window.wp.editor&&void 0!==window.tinyMCEPreInit&&void 0!==window.tinyMCEPreInit.mceInit.pf_wp_editor){var e=$(this),t=e.find(".pf-wp-editor"),n=e.find("textarea"),i=e.find(".wp-editor-wrap").length||e.find(".mce-container").length;i&&(t.empty(),t.append(n),n.css("display",""));var a=PF.helper.uid("pf-editor-");n.attr("id",a);var r={tinymce:window.tinyMCEPreInit.mceInit.pf_wp_editor,quicktags:window.tinyMCEPreInit.qtInit.pf_wp_editor},o=t.data("editor-settings"),f=function(e){e.on("change",PF.helper.debounce(function(){e.save(),n.trigger("change")},250))},l=wp.oldEditor?wp.oldEditor:wp.editor;l&&l.hasOwnProperty("autop")&&(wp.editor.autop=l.autop,wp.editor.removep=l.removep,wp.editor.initialize=l.initialize),r.tinymce=$.extend({},r.tinymce,{selector:"#"+a,setup:f}),!1===o.tinymce&&(r.tinymce=!1,t.addClass("pf-no-tinymce")),!1===o.quicktags&&(r.quicktags=!1,t.addClass("pf-no-quicktags"));var d=setInterval(function(){e.is(":visible")&&(window.wp.editor.initialize(a,r),clearInterval(d))});if(o.media_buttons&&window.pf_media_buttons){var p=t.find(".wp-media-buttons");if(p.length)p.find(".pf-shortcode-button").data("editor-id",a);else{var s=$(window.pf_media_buttons);s.find(".pf-shortcode-button").data("editor-id",a),t.prepend(s)}}}})},$.fn.pf_field_upload=function(){return this.each(function(){var e,t=$(this),n=t.find("input"),i=t.find(".pf--button"),a=t.find(".pf--remove"),r=i.data("library")&&i.data("library").split(",");n.on("change",function(e){n.val()?a.removeClass("hidden"):a.addClass("hidden")}),i.on("click",function(t){t.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(e?e.open():(e=window.wp.media({library:{type:i.data("library").split(",")}}),e.on("select",function(){var t=e.state().get("selection").first().attributes;r.length&&-1===r.indexOf(t.subtype)&&-1===r.indexOf(t.type)||n.val(t.url).trigger("change")}),e.open()))}),a.on("click",function(e){e.preventDefault(),n.val("").trigger("change")})})},$.fn.pf_field_media=function(){return this.each(function(){var e,t=$(this),n=t.find(".pf--button"),i=t.find(".pf--remove"),a=n.data("library")&&n.data("library").split(",")||"";n.on("click",function(r){r.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(e?e.open():(e=window.wp.media({library:{type:n.data("library").split(",")}}),e.on("select",function(){var r,o=e.state().get("selection").first().attributes,f=n.data("preview-size")||"thumbnail";a.length&&-1===a.indexOf(o.subtype)&&-1===a.indexOf(o.type)||(t.find(".pf--url").val(o.url),t.find(".pf--id").val(o.id),t.find(".pf--width").val(o.width),t.find(".pf--height").val(o.height),t.find(".pf--alt").val(o.alt),t.find(".pf--title").val(o.title),t.find(".pf--description").val(o.description),r=void 0!==o.sizes&&void 0!==o.sizes.thumbnail&&"thumbnail"===f?o.sizes.thumbnail.url:void 0!==o.sizes&&void 0!==o.sizes.full?o.sizes.full.url:o.icon,i.removeClass("hidden"),t.find(".pf--preview").removeClass("hidden"),t.find(".pf--src").attr("src",r),t.find(".pf--thumbnail").val(r).trigger("change"))}),e.open()))}),i.on("click",function(e){e.preventDefault(),i.addClass("hidden"),t.find(".pf--preview").addClass("hidden"),t.find("input").val(""),t.find(".pf--thumbnail").trigger("change")})})},$.fn.pf_field_gallery=function(){return this.each(function(){var e,t=$(this),n=t.find(".pf-edit-gallery"),i=t.find(".pf-clear-gallery"),a=t.find("ul"),r=t.find("input");t.find("img");t.on("click",".pf-button, .pf-edit-gallery",function(t){var o=$(this),f=r.val(),l=o.hasClass("pf-edit-gallery")?"edit":"add",d="add"!==l||f.length?"gallery-edit":"gallery";t.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&("gallery"===d?(e=window.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),e.open()):(e=window.wp.media.gallery.edit('[gallery ids="'+f+'"]'),"add"===l&&e.setState("gallery-library")),e.on("update",function(e){a.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;return a.append('<li><img src="'+n+'"></li>'),t.id});r.val(t.join(",")).trigger("change"),i.removeClass("hidden"),n.removeClass("hidden")}))}),i.on("click",function(e){e.preventDefault(),a.empty(),r.val("").trigger("change"),i.addClass("hidden"),n.addClass("hidden")})})},$.fn.pf_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var e=$(this),t=e.find("textarea"),n=e.find(".CodeMirror"),i=t.data("editor");n.length&&n.remove();var a=setInterval(function(){if(e.is(":visible")){var n=CodeMirror.fromTextArea(t[0],i);if("default"!==i.theme&&-1===PF.vars.code_themes.indexOf(i.theme)){var r=$("<link>");$("#pf-codemirror-css").after(r),r.attr({rel:"stylesheet",id:"pf-codemirror-"+i.theme+"-css",href:i.cdnURL+"/theme/"+i.theme+".min.css",type:"text/css",media:"all"}),PF.vars.code_themes.push(i.theme)}CodeMirror.modeURL=i.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,i.mode),n.on("change",function(e,i){t.val(n.getValue()).trigger("change")}),clearInterval(a)}})}})},$.fn.pf_field_wp_editor=function(){return this.each(function(){if(void 0!==window.wp.editor&&void 0!==window.tinyMCEPreInit&&void 0!==window.tinyMCEPreInit.mceInit.pf_wp_editor){var e=$(this),t=e.find(".pf-wp-editor"),n=e.find("textarea"),i=e.find(".wp-editor-wrap").length||e.find(".mce-container").length;i&&(t.empty(),t.append(n),n.css("display",""));var a=PF.helper.uid("pf-editor-");n.attr("id",a);var r={tinymce:window.tinyMCEPreInit.mceInit.pf_wp_editor,quicktags:window.tinyMCEPreInit.qtInit.pf_wp_editor},o=t.data("editor-settings"),f=function(e){e.on("change",PF.helper.debounce(function(){e.save(),n.trigger("change")},250))};r.tinymce=$.extend({},r.tinymce,{selector:"#"+a,setup:f}),!1===o.tinymce&&(r.tinymce=!1,t.addClass("pf-no-tinymce")),!1===o.quicktags&&(r.quicktags=!1,t.addClass("pf-no-quicktags"));var l=setInterval(function(){e.is(":visible")&&(window.wp.editor.initialize(a,r),clearInterval(l))});if(o.media_buttons&&window.pf_media_buttons){var d=t.find(".wp-media-buttons");if(d.length)d.find(".pf-shortcode-button").data("editor-id",a);else{var p=$(window.pf_media_buttons);p.find(".pf-shortcode-button").data("editor-id",a),t.prepend(p)}}}})},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),PF.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100,i=n<100;return{value:t,transparent:n,rgba:i}},$.fn.pf_color=function(){return this.each(function(){var e,t=$(this),n=PF.funcs.parse_color(t.val()),i=!window.pf_vars.color_palette.length||window.pf_vars.color_palette;t.hasClass("wp-color-picker")&&t.closest(".wp-picker-container").after(t).remove(),t.wpColorPicker({palettes:i,change:function(n,i){var a=i.color.toString();e.removeClass("pf--transparent-active"),e.find(".pf--transparent-offset").css("background-color",a),t.val(a).trigger("change")},create:function(){e=t.closest(".wp-picker-container");var i=t.data("a8cIris"),a=$('<div class="pf--transparent-wrap"><div class="pf--transparent-slider"></div><div class="pf--transparent-offset"></div><div class="pf--transparent-text"></div><div class="pf--transparent-button button button-small">transparent</div></div>').appendTo(e.find(".wp-picker-holder")),r=a.find(".pf--transparent-slider"),o=a.find(".pf--transparent-text"),f=a.find(".pf--transparent-offset"),l=a.find(".pf--transparent-button");"transparent"===t.val()&&e.addClass("pf--transparent-active"),l.on("click",function(){"transparent"!==t.val()?(t.val("transparent").trigger("change"),e.addClass("pf--transparent-active")):(t.val(i._color.toString()).trigger("change"),e.removeClass("pf--transparent-active"))}),r.slider({value:n.transparent,step:1,min:0,max:100,slide:function(e,n){var a=parseFloat(n.value/100);i._color._alpha=a,t.wpColorPicker("color",i._color.toString()),o.text(1===a||0===a?"":a)},create:function(){var l=parseFloat(n.transparent/100),d=l<1?l:"";o.text(d),f.css("background-color",n.value),e.on("click",".wp-picker-clear",function(){i._color._alpha=1,o.text(""),r.slider("option","value",100),e.removeClass("pf--transparent-active"),t.trigger("change")}),e.on("click",".wp-picker-default",function(){var e=PF.funcs.parse_color(t.data("default-color")),n=parseFloat(e.transparent/100),a=n<1?n:"";i._color._alpha=n,o.text(a),r.slider("option","value",e.transparent)}),e.on("click",".wp-color-result",function(){a.toggle()}),$("body").on("click.wpcolorpicker",function(){a.hide()})}})}})})},$.fn.pf_field_background=function(){return this.each(function(){$(this).find(".pf--media").pf_reload_script()})},$.fn.pf_field_slider=function(){return this.each(function(){var e=$(this),t=e.find("input"),n=e.find(".pf-slider-ui"),i=t.data(),a=t.val()||0;n.hasClass("ui-slider")&&n.empty(),n.slider({range:"min",value:a,min:i.min,max:i.max,step:i.step,slide:function(e,n){t.val(n.value).trigger("change")}}),t.keyup(function(){n.slider("value",t.val())})})},$.fn.pf_number=function(){return this.each(function(){$(this).on("keypress",function(e){if(0!==e.keyCode&&8!==e.keyCode&&45!==e.keyCode&&46!==e.keyCode&&(e.keyCode<48||e.keyCode>57))return!1})})},$.fn.pf_field_typography=function(){return this.each(function(){var e=this,t=$(this),n=[],i=pf_typography_json.webfonts,a=pf_typography_json.googlestyles,r=pf_typography_json.defaultstyles;e.sanitize_subset=function(e){return e=e.replace("-ext"," Extended"),e=e.charAt(0).toUpperCase()+e.slice(1),e},e.sanitize_style=function(e){return a[e]?a[e]:e},e.load_google_font=function(e,t,i){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",i=i?i.replace("normal",""):"",(t||i)&&(e=e+":"+t+i),-1===n.indexOf(e)&&WebFont.load({google:{families:[e]}}),n.push(e))},e.append_select_options=function(t,n,i,a,r){t.find("option").not(":first").remove();var o="";$.each(n,function(t,n){var f,l=n;f=r?i&&-1!==i.indexOf(n)?" selected":"":i&&i===n?" selected":"","subset"===a?l=e.sanitize_subset(n):"style"===a&&(l=e.sanitize_style(n)),o+='<option value="'+n+'"'+f+">"+l+"</option>"}),t.append(o).trigger("pf.change").trigger("chosen:updated")},e.init=function(){var n=[],a=t.find(".pf--typography"),o=t.find(".pf--type"),f=a.data("unit"),l=a.data("exclude")?a.data("exclude").split(","):[];if(t.find(".pf--chosen").length){var d=t.find("select");d.each(function(){var e=$(this),t=e.parent().find(".chosen-container");t.length&&t.remove(),e.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})})}var p=t.find(".pf--font-family"),s=p.val();p.find("option").not(":first-child").remove();var c="";$.each(i,function(e,t){l&&-1!==l.indexOf(e)||(c+='<optgroup label="'+t.label+'">',$.each(t.fonts,function(t,n){n="object"==typeof n?t:n;var i=n===s?" selected":"";c+='<option value="'+n+'" data-type="'+e+'"'+i+">"+n+"</option>"}),c+="</optgroup>")}),p.append(c).trigger("chosen:updated");var h=t.find(".pf--block-font-style");if(h.length){var u=t.find(".pf--font-style-select"),v=u.val()?u.val().replace(/normal/g,""):"";u.on("change pf.change",function(e){var i=u.val();!i&&n&&-1===n.indexOf("normal")&&(i=n[0]);var a=i&&"italic"!==i&&"normal"===i?"normal":"",r=i&&"italic"!==i&&"normal"!==i?i.replace("italic",""):a,o=i&&"italic"===i.substr(-6)?"italic":"";t.find(".pf--font-weight").val(r),t.find(".pf--font-style").val(o)});var m=t.find(".pf--block-extra-styles");if(m.length)var g=t.find(".pf--extra-styles"),_=g.val()}var b=t.find(".pf--block-subset");if(b.length)var w=t.find(".pf--subset"),y=w.val(),C=w.data("multiple")||!1;var k=t.find(".pf--block-backup-font-family");p.on("change pf.change",function(t){b.length&&b.addClass("hidden"),m.length&&m.addClass("hidden"),k.length&&k.addClass("hidden");var a=p.find(":selected"),f=a.val(),l=a.data("type");if(l&&f){if("google"!==l&&"custom"!==l||!k.length||k.removeClass("hidden"),h.length){var d=r;"google"===l&&i[l].fonts[f][0]?d=i[l].fonts[f][0]:"custom"===l&&i[l].fonts[f]&&(d=i[l].fonts[f]),n=d;var s=-1!==d.indexOf("normal")?"normal":d[0],c=v&&-1!==d.indexOf(v)?v:s;e.append_select_options(u,d,c,"style"),v=!1,h.removeClass("hidden"),"google"===l&&m.length&&d.length>1&&(e.append_select_options(g,d,_,"style",!0),_=!1,m.removeClass("hidden"))}if("google"===l&&b.length&&i[l].fonts[f][1]){var $=i[l].fonts[f][1],x=$.length<2&&"latin"!==$[0]?$[0]:"",P=y&&-1!==$.indexOf(y)?y:x;P=C&&y?y:P,e.append_select_options(w,$,P,"subset",C),y=!1,b.removeClass("hidden")}}else b.length&&(w.find("option").not(":first-child").remove(),w.trigger("chosen:updated")),h.length&&(u.find("option").not(":first-child").remove(),u.trigger("chosen:updated"));o.val(l)}).trigger("pf.change");var x=t.find(".pf--block-preview");if(x.length){var P=t.find(".pf--preview");t.on("change",PF.helper.debounce(function(n){x.removeClass("hidden");var i=p.val(),a=t.find(".pf--font-weight").val(),r=t.find(".pf--font-style").val(),o=t.find(".pf--font-size").val(),l=t.find(".pf--font-variant").val(),d=t.find(".pf--line-height").val(),s=t.find(".pf--text-align").val(),c=t.find(".pf--text-transform").val(),h=t.find(".pf--text-decoration").val(),u=t.find(".pf--color").val(),v=t.find(".pf--word-spacing").val(),m=t.find(".pf--letter-spacing").val(),g=t.find(".pf--custom-style").val(),_=t.find(".pf--type").val();"google"===_&&e.load_google_font(i,a,r);var b={};i&&(b.fontFamily=i),a&&(b.fontWeight=a),r&&(b.fontStyle=r),l&&(b.fontVariant=l),o&&(b.fontSize=o+f),d&&(b.lineHeight=d+f),m&&(b.letterSpacing=m+f),v&&(b.wordSpacing=v+f),s&&(b.textAlign=s),c&&(b.textTransform=c),h&&(b.textDecoration=h),u&&(b.color=u),P.removeAttr("style"),g&&P.attr("style",g),P.css(b)},100)),x.on("click",function(){P.toggleClass("pf--black-background");var e=x.find(".pf--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),x.hasClass("hidden")||t.trigger("change")}},e.init()})},$.fn.pf_field_spinner=function(){return this.each(function(){var e=$(this),t=e.find("input"),n=e.find(".ui-spinner-button");n.length&&n.remove(),t.spinner({max:t.data("max")||100,min:t.data("min")||0,step:t.data("step")||1,spin:function(e,n){t.val(n.value).trigger("change")}})})},$.fn.pf_field_sorter=function(){return this.each(function(){var e=$(this),t=e.find(".pf-enabled"),n=e.find(".pf-disabled"),i=!!n.length&&n;t.sortable({connectWith:i,placeholder:"ui-sortable-placeholder",update:function(t,n){var i=n.item.find("input");n.item.parent().hasClass("pf-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),e.pf_customizer_refresh()}}),i&&i.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(t,n){e.pf_customizer_refresh()}})})},$.fn.pf_field_sortable=function(){return this.each(function(){var e=$(this).find(".pf--sortable");e.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(t,n){e.pf_customizer_refresh()}}),e.find(".pf--sortable-content").pf_reload_script()})},$.fn.pf_field_switcher=function(){return this.each(function(){if(!$(this).hasClass("pf-field-switcher-disabled")){var e=$(this).find(".pf--switcher");e.unbind("click").on("click",function(){if(!$(this).hasClass("pf-field-switcher-disabled")){var t=0,n=e.find("input");e.hasClass("pf--active")?e.removeClass("pf--active"):(t=1,e.addClass("pf--active")),n.val(t).trigger("change")}}),e.pf_reload_script()}})},$.fn.pf_field_icon=function(){return this.each(function(){var e=$(this);e.on("click",".pf-icon-add",function(t){t.preventDefault();var n=$(this),i=$("#pf-modal-icon");i.show(),PF.vars.$icon_target=e,PF.vars.icon_modal_loaded||(i.find(".pf-modal-loading").show(),window.wp.ajax.post("pf-get-icons",{nonce:n.data("nonce")}).done(function(e){i.find(".pf-modal-loading").hide(),PF.vars.icon_modal_loaded=!0;var t=i.find(".pf-modal-load").html(e.content);t.on("click","a",function(e){e.preventDefault();var t=$(this).data("pf-icon");PF.vars.$icon_target.find("i").removeAttr("class").addClass(t),PF.vars.$icon_target.find("input").val(t).trigger("change"),PF.vars.$icon_target.find(".pf-icon-preview").removeClass("hidden"),PF.vars.$icon_target.find(".pf-icon-remove").removeClass("hidden"),i.hide()}),i.on("change keyup",".pf-icon-search",function(){var e=$(this).val(),n=t.find("a");n.each(function(){var t=$(this);t.data("pf-icon").search(new RegExp(e,"i"))<0?t.hide():t.show()})}),i.on("click",".pf-modal-close, .pf-modal-overlay",function(){i.hide()})}))}),e.on("click",".pf-icon-remove",function(t){t.preventDefault(),e.find(".pf-icon-preview").addClass("hidden"),e.find("input").val("").trigger("change"),$(this).addClass("hidden")})})},$.fn.pf_field_date=function(){return this.each(function(){var e=$(this),t=e.find("input"),n=e.find(".pf-date-settings").data("settings"),i={showAnim:"",beforeShow:function(e,t){$(t.dpDiv).addClass("pf-datepicker-wrapper")},onClose:function(e,t){$(t.dpDiv).removeClass("pf-datepicker-wrapper")}};n=$.extend({},n,i),2===t.length&&(n=$.extend({},n,{onSelect:function(e){$(this),t.first();var i=t.first().attr("id")===$(this).attr("id")?"minDate":"maxDate",a=$.datepicker.parseDate(n.dateFormat,e);t.not(this).datepicker("option",i,a)}})),t.each(function(){var e=$(this);e.hasClass("hasDatepicker")&&e.removeAttr("id").removeClass("hasDatepicker"),e.datepicker(n)})})},$.fn.pf_dependency=function(){return this.each(function(){var e=$(this),t=$.pf_deps.createRuleset(),n=[],i=!1;n=[];e.children("[data-controller]").each(function(){var e=$(this),a=e.data("controller").split("|"),r=e.data("condition").split("|"),o=e.data("value").toString().split("|"),f=t;e.data("depend-global")&&(i=!0),$.each(a,function(t,i){var a=o[t]||"",l=r[t]||r[0];f=f.createRule('[data-depend-id="'+i+'"]',l,a),f.include(e),n.push(i)})}),n.length&&(i?$.pf_deps.enable(PF.vars.$body,t,n):$.pf_deps.enable(e,t,n))})},$.fn.pf_field_backup=function(){return this.each(function(){var e=$(this),t=$("body"),n=e.find(".pf-import"),i=e.find(".pf-reset"),a=!1;i.on("click",function(e){e.preventDefault(),a||(t.addClass("pf-opacity"),window.wp.ajax.post("pf-reset",{unique:i.data("unique"),nonce:i.data("nonce")}).done(function(e){window.location.reload(!0)}).fail(function(e){alert(e.error),a=!1,t.removeClass("pf-opacity")})),a=!0}),n.on("click",function(i){i.preventDefault(),a||(t.addClass("pf-opacity"),window.wp.ajax.post("pf-import",{unique:n.data("unique"),nonce:n.data("nonce"),import_data:e.find(".pf-import-data").val(),where:e.find(".pf-backup-where").val(),post_id:e.find(".pf-backup-post_id").val()}).done(function(e){window.location.reload(!0)}).fail(function(e){alert(e.error),console.log("debug:"+JSON.stringify(e)),a=!1,t.removeClass("pf-opacity")})),a=!0})})},$.fn.pf_siblings=function(){return this.each(function(){var e=$(this),t=e.find(".pf--sibling"),n=e.data("multiple")||!1;t.on("click",function(){var t=$(this);n?t.hasClass("pf--active")?(t.removeClass("pf--active"),t.find("input").prop("checked",!1).trigger("change")):(t.addClass("pf--active"),t.find("input").prop("checked",!0).trigger("change")):(e.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("pf--active").siblings().removeClass("pf--active"))})})},$.fn.pf_search=function(){return this.each(function(){var e=$(this),t=e.find("input");t.on("change keyup",function(){var e=$(this).val(),t=$(".pf-wrapper"),n=t.find(".pf-section"),i=n.find("> .pf-field:not(.hidden)"),a=i.find("> .pf-title, .pf-search-tags");e.length>3?(i.addClass("pf-hidden"),t.addClass("pf-search-all"),a.each(function(){var t=$(this);if(t.text().match(new RegExp(".*?"+e+".*?","i"))){var n=t.closest(".pf-field");n.removeClass("pf-hidden"),n.parent().pf_reload_script()}})):(i.removeClass("pf-hidden"),t.removeClass("pf-search-all"))})})},$.fn.pf_confirm=function(){return this.each(function(){$(this).on("click",function(e){var t=$(this).data("confirm")||window.pf_vars.i18n.confirm;if(!confirm(t))return e.preventDefault(),!1})})},$.fn.serializeObject=function(){var e={};return $.each(this.serializeArray(),function(t,n){var i=n.name,a=n.value;e[i]=e[i]===undefined?a:$.isArray(e[i])?e[i].concat(a):[e[i],a]}),e},$.fn.pf_expand_all=function(){return this.each(function(){$(this).on("click",function(e){e.preventDefault(),$(".pf-wrapper").toggleClass("pf-show-all"),$(".pf-section").pf_reload_script(),$(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},$.fn.pf_taxonomies=function(){return this.each(function(){var e=$(this),t=e.find(".pf-taxonomy-wrap-nav"),n=e.closest(".pf-content").prev(".pf-nav-metabox").attr("data-unique"),i=e.attr("data-id");$(this).find(".pf-taxonomy-content-tab .btn-select-all").on("click",function(e){e.preventDefault(),
$(this).parent().find("input[type='checkbox']").prop("checked",!0)}),t.find(".pf-taxonomy-nav-tab").on("click",function(e){e.preventDefault();var t=$(this).attr("data-id-content");$(this).closest(".pf-taxonomy-wrap-nav").children(".pf-taxonomy-nav").removeClass("pf-taxonomy-nav-active"),$(this).parent().addClass("pf-taxonomy-nav-active"),$(this).closest(".pf-taxonomy-wrap").find(".pf-taxonomy-content-tab").css("display","none"),$(this).closest(".pf-taxonomy-wrap").find(".pf-taxonomy-content-tab-id-"+t).css("display","block"),PF.helper.set_cookie("pf-lasttab-taxonomies-id-"+i+"-"+n,t)}),e.find("textarea").length>0&&e.find(".pf-taxonomy-content .pf-taxonomy-content-tab").each(function(){$(this).children(".tag-editor").tagEditor({beforeTagSave:function(e,t,n,i,a){return a+"|"+e.attr("data-cpt")},forceLowercase:!1})}),$(this).find(".pf-taxonomy-content-tab .pf-taxonomy-selected-all .pf--button").on("click",function(e){$(this).find("input[type='radio']").val()?$(this).parent().parent().next(".pf-taxonomy-collapse").css("display","none"):$(this).parent().parent().next(".pf-taxonomy-collapse").css("display","block")})})},$.fn.pf_tags=function(){return this.each(function(){var e=$(this).find(".tag-editor"),t=e.attr("data-attributes-js")||"{}";e.tagEditor(JSON.parse(t)),e.pf_reload_script()})},$.fn.pf_field_styling=function(){return this.each(function(){var e=$(this),t=e.find(".pf--styling__nav");t.find("li").on("click",function(){t.find("li").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-id");t.closest(".pf--styling").find(".pf--styling__wrap").addClass("hidden"),t.closest(".pf--styling").find(".pf--styling__wrap_"+e).removeClass("hidden")}),$(".pf--styling__tab").find("li").on("click",function(){var e=$(this).closest(".pf--styling__wrap");e.find(".pf--styling__tab li").removeClass("active"),$(this).addClass("active");var t=$(this).attr("data-id");e.find(".pf--block").css("display","none"),e.find(".pf--block.pf--tabs__"+t+"_content").css("display","block")});var n=null;e.find("textarea").each(function(){if("function"==typeof CodeMirror){var t=e.find(".CodeMirror"),i=$(this),a=i.data("editor");if(t.length,n=CodeMirror.fromTextArea(i[0],a),"default"!==a.theme&&-1===PF.vars.code_themes.indexOf(a.theme)){var r=$("<link>");$("#pf-codemirror-css-2").after(r),r.attr({rel:"stylesheet",id:"pf-codemirror-2-"+a.theme+"-css",href:a.cdnURL+"/theme/"+a.theme+".min.css",type:"text/css",media:"all"}),PF.vars.code_themes.push(a.theme)}CodeMirror.modeURL=a.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,a.mode),n.on("change",function(e,t){i.val(n.getValue()).trigger("change")}),n.refresh()}}),e.find(".pf--tabs__custom").on("click",function(){"function"==typeof CodeMirror&&e.find(".CodeMirror").each(function(e,t){t.CodeMirror.refresh()})})})},$.fn.pf_save=function(){return this.each(function(){var e,t=$(this),n=$(".pf-save"),i=$(".pf-options"),a=!1;t.on("click",function(r){if(!a){var o=t.data("save"),f=t.val();n.attr("value",o),t.hasClass("pf-save-ajax")&&(r.preventDefault(),i.addClass("pf-saving"),n.prop("disabled",!0),window.wp.ajax.post("pf_"+i.data("unique")+"_ajax_save",{data:$("#pf-form").serializeJSONPF()}).done(function(t){clearTimeout(e);var r=$(".pf-form-success");r.empty().append(t.notice).slideDown("fast",function(){e=setTimeout(function(){r.slideUp("fast")},2e3)}),$(".pf-error").remove();var o=$(".pf-form-error");if(o.empty().hide(),Object.keys(t.errors).length){var l='<i class="pf-label-error pf-error">!</i>';$.each(t.errors,function(e,t){var n=$('[data-depend-id="'+e+'"]'),i=$("#pf-tab-link-"+(n.closest(".pf-section").index()+1)),a=i.closest(".pf-tab-depth-0");n.closest(".pf-fieldset").append('<p class="pf-text-error pf-error">'+t+"</p>"),i.find(".pf-error").length||i.append(l),a.find(".pf-arrow .pf-error").length||a.find(".pf-arrow").append(l),o.append("<div>"+l+" "+t+"</div>")}),o.show()}i.removeClass("pf-saving"),n.prop("disabled",!1).attr("value",f),a=!1}).fail(function(e){alert(e.error),i.removeClass("pf-saving"),n.prop("disabled",!1).attr("value",f),a=!1}))}a=!0})})},$.fn.pf_widgets=function(){this.length&&($(document).on("widget-added widget-updated",function(e,t){t.find(".pf-fields").pf_reload_script()}),$(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".pf-fields").pf_reload_script_retry()}),$(document).on("click",".widget-top",function(e){$(this).parent().find(".pf-fields").pf_reload_script()}))},$.fn.pf_reload_script_retry=function(){return this.each(function(){var e=$(this);e.data("inited")&&e.children(".pf-field-wp_editor").pf_field_wp_editor()})},$.fn.pf_nav_metabox=function(){return this.each(function(){var e,t,n=$(this),i=n.find("a"),a=n.data("unique"),r=$("#post_ID").val()||"global";i.on("click",function(n){n.preventDefault();var i=$(this),o=i.data("section");t!==undefined&&t.removeClass("pf-section-active"),e!==undefined&&e.hide(),i.addClass("pf-section-active");var f=$("#pf-section-"+o);f.css({display:"block"}),f.pf_reload_script(),PF.helper.set_cookie("pf-last-metabox-tab-"+r+"-"+a,o),e=f,t=i});var o=PF.helper.get_cookie("pf-last-metabox-tab-"+r+"-"+a);o?n.find('a[data-section="'+o+'"]').trigger("click"):i.first("a").trigger("click")})},$.fn.pf_page_templates=function(){this.length&&$(document).on("change",".editor-page-attributes__template select, #page_template",function(){var e=$(this).val()||"default";$(".pf-page-templates").removeClass("pf-show").addClass("pf-hide"),$(".pf-page-"+e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("pf-hide").addClass("pf-show")})},$.fn.pf_post_formats=function(){this.length&&$(document).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var e=$(this).val()||"default";e="0"===e?"default":e,$(".pf-post-formats").removeClass("pf-show").addClass("pf-hide"),$(".pf-post-format-"+e).removeClass("pf-hide").addClass("pf-show")})},$.fn.pf_help=function(){return this.each(function(){var e,t,n=$(this);n.on({mouseenter:function(){e=$('<div class="pf-tooltip"></div>').html(n.attr("data-tooltip")).appendTo("body"),t=PF.vars.is_rtl?n.offset().left+24:n.offset().left+n.outerWidth()/2-e.outerWidth()/2,e.css({top:n.offset().top-(e.outerHeight()+5),left:t}),e.addClass("show")},mouseleave:function(){e!==undefined&&(e.remove(),e.removeClass("show"))}})})},$.fn.pf_customizer_refresh=function(){return this.each(function(){var e=$(this),t=e.closest(".pf-customize-complex");if(t.length){var n=t.find(":input"),i=t.data("unique-id"),a=t.data("option-id"),r=n.serializeObject(),o=$.isEmptyObject(r)?"":r[i][a],f=wp.customize.control(i+"["+a+"]");f.setting._value=null,f.setting.set(o)}else e.find(":input").first().trigger("change");$(document).trigger("pf-customizer-refresh",e)})},$.fn.pf_customizer_listen=function(e){var t=$.extend({closest:!1},e);return this.each(function(){if(window.wp.customize!==undefined){var e=t.closest?$(this).closest(".pf-customize-complex"):$(this),n=e.find(":input"),i=e.data("unique-id"),a=e.data("option-id");i!==undefined&&n.on("change keyup",PF.helper.debounce(function(){var t=e.find(":input").serializeObject();!$.isEmptyObject(t)&&t[i]&&window.wp.customize.control(i+"["+a+"]").setting.set(t[i][a])},250))}})},$(document).on("expanded",".control-section-pf",function(){var e=$(this);e.hasClass("open")&&!e.data("inited")&&(e.pf_dependency(),e.find(".pf-customize-field").pf_reload_script({dependency:!1}),e.find(".pf-customize-complex").pf_customizer_listen(),e.data("inited",!0))}),PF.vars.$window.on("resize pf.resize",PF.helper.debounce(function(e){var t=navigator.userAgent.indexOf("AppleWebKit/")>-1?PF.vars.$window.width():window.innerWidth;t<=782&&!PF.vars.onloaded&&($(".pf-section").pf_reload_script(),PF.vars.onloaded=!0)},200)).trigger("pf.resize"),$.fn.pf_chosen=function(){return this.each(function(){var e=$(this),t=e.parent().find(".chosen-container"),n=e.attr("multiple")||!1,i=n?"100%":"auto",a=$.extend({allow_single_deselect:!0,disable_search_threshold:15,width:i},e.data());t.length&&t.remove(),$(this).chosen(a)})},$.fn.pf_select2=function(){return this.each(function(){var e=$(this);e.attr("multiple");e.select2()})},$.fn.pf_autocomplete=function(){return this.each(function(){var e=$(this),t=e.find(".pf-search-post-inputs-wrap .pf-search-input"),n=e.find(".pf-search-post-inputs-wrap .pf-search-input-value"),i=e.find(".pf-search-post-inputs-wrap .pf-search-input-data"),a=e.find(".pf-search-post-inputs-wrap .pf-search-select"),r=e.find(".pf-search-post-inputs-wrap .pf-search-post-button"),o=e.find(".pf-search-post-results"),f=e.find(".pf-search-post-values"),l=e.find(".pf-search-post-results"),d=$(this).find(".pf-search-post-nonce").val(),p=e.find(".pf-search-post-image-default").val(),s=e.find(".pf-search-post-is-image").val(),c=e.find(".pf-search-post-is-filter").val(),h=e.find(".pf-search-post-is-sortable").val();t.keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1}),t.autocomplete({source:function(e,t){var n=a.length?a.val():null;jQuery.ajax({type:"post",dataType:"json",url:ajaxurl,data:"action=pf-search-post-ajax&nonce="+d+"&q="+e.term+"&cpt="+n+"&exclude="+f.val()+"&filter="+c,success:function(e){console.log(e),t($.map(e.data,function(e,t){return{label:e.title,value:parseInt(e.id),image:e.image}}))}})},select:function(e,a){return"number"==typeof a.item.value?(n.val(a.item.value),t.val(a.item.label),i.val(a.item.value+"|"+a.item.label+"|"+a.item.image)):(n.val(0),t.val(""),i.val("")),!1},minLength:3,autoFocus:!0,focus:function(e,t){return!1},fail:function(e,t,n){console.log(e),console.log(t),console.log(n)},appendTo:e.find(".pf-search-post-custom-result-wrap"),position:{my:"right-0 top+30",at:"right top"}}).data("ui-autocomplete")._renderItem=function(e,t){e.addClass("pf-autocomplete-item"),t.image!==undefined&&t.image||(t.image=p);var n="";return 0!=s&&(n="<div class='pf-autocomplete-item-img'><img src='"+t.image+"' /></div>"),$("<li/>").data("ui-autocomplete-item",t).append(n).append("<div class='pf-autocomplete-item-content'><p>"+t.label+"</p></div>").appendTo(e)},r.on("click",function(e){if(e.preventDefault(),0!=n.val()){var a=i.val().split("|"),f=a[0],l=a[1],d=a[2];d!==undefined&&d||(d=p);var c="";0!=s&&(c='<div class="pf-search-post-item-index-img"><img src="'+d+'" /></div>');var u="";0!=h&&(u='<i class="pf-sp-sort fa fa-arrows ui-sortable-handle"></i>'),$('<li class="pf-search-post-item-index pf-search-post-item-id-'+f+'">').append(c).append('<div class="pf-autocomplete-item-content"><p>'+l+"</p></div>").append('<div class="pf-search-post-helper">'+u+'<i data-id="'+f+'" class="pf-sp-remove fa fa-times"></i></div>').append("</li>").appendTo(o),n.val(""),t.val(""),i.val("");var v=r.closest(".pf--search-post-wrap").find(".pf-search-post-values");v.val(v.val()+","+f)}}),$(document).on("click",".pf-search-post-results .pf-search-post-item-index .pf-sp-remove",function(){var e=$(this).attr("data-id"),t=f.val(),n=t.split(","),i="";for(let t=0;t<n.length;t++){const a=n[t];a!=e&&(i+=a+",")}f.val(i),$(this).closest(".pf-search-post-item-index").remove()}),0!=h&&l.sortable({axis:"y",handle:".pf-sp-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){},update:function(e,t){u()}});var u=function(){var e="";$(l).children(".pf-search-post-item-index").each(function(){e+=$(this).attr("data-id")+","}),f.val("").val(e)}})},$.fn.pf_reload_script=function(e){var t=$.extend({dependency:!0},e);return this.each(function(){var e=$(this);e.data("inited")||(e.children(".pf-field-accordion").pf_field_accordion(),e.children(".pf-field-repeater").pf_field_repeater(),e.children(".pf-field-checkbox").find(".pf-checkbox").pf_checkbox(),e.children(".pf-field-group").pf_field_group(),e.children(".pf-field-tab").pf_field_tab(),e.children(".pf-field-fieldset").pf_field_fieldset(),e.children(".pf-field-upload").pf_field_upload(),e.children(".pf-field-media").pf_field_media(),e.children(".pf-field-gallery").pf_field_gallery(),e.children(".pf-field-code_editor").pf_field_code_editor(),e.children(".pf-field-wp_editor").pf_field_wp_editor(),e.children(".pf-field-slider").pf_field_slider(),e.children(".pf-field-background").pf_field_background(),e.children(".pf-field-typography").pf_field_typography(),e.children(".pf-field-spinner").pf_field_spinner(),e.children(".pf-field-sorter").pf_field_sorter(),e.children(".pf-field-sortable").pf_field_sortable(),e.children(".pf-field-switcher").pf_field_switcher(),e.children(".pf-field-icon").pf_field_icon(),e.children(".pf-field-date").pf_field_date(),e.children(".pf-field-backup").pf_field_backup(),e.children(".pf-field-taxonomies").pf_taxonomies(),e.children(".pf-field-tag").pf_tags(),e.children(".pf-field-styling").pf_field_styling(),e.children(".pf-field-border").find(".pf-color").pf_color(),e.children(".pf-field-background").find(".pf-color").pf_color(),e.children(".pf-field-color").find(".pf-color").pf_color(),e.children(".pf-field-color_group").find(".pf-color").pf_color(),e.children(".pf-field-link_color").find(".pf-color").pf_color(),e.children(".pf-field-typography").find(".pf-color").pf_color(),e.children(".pf-field-styling").find(".pf-color").pf_color(),e.children(".pf-field-dimensions").find(".pf-number").pf_number(),e.children(".pf-field-slider").find(".pf-number").pf_number(),e.children(".pf-field-spacing").find(".pf-number").pf_number(),e.children(".pf-field-spinner").find(".pf-number").pf_number(),e.children(".pf-field-typography").find(".pf-number").pf_number(),e.children(".pf-field-styling").find(".pf-number").pf_number(),e.children(".pf-field-palette").find(".pf-siblings").pf_siblings(),e.children(".pf-field-image_select").find(".pf-siblings").pf_siblings(),e.children(".pf-field-button_set").find(".pf-siblings").pf_siblings(),e.children(".pf-field-taxonomies").find(".pf-siblings").pf_siblings(),e.children(".pf-field").find("[data-tooltip]").pf_help(),e.children(".pf-field-select").find(".pf-chosen").pf_chosen(),e.children(".pf-field-select2").find("select").pf_select2(),e.children(".pf-field-search_post").pf_autocomplete(),t.dependency&&e.pf_dependency(),e.data("inited",!0),$(document).trigger("pf-reload-script",e))})},$(document).ready(function(){$(".pf-save").pf_save(),$(".pf-confirm").pf_confirm(),$(".pf-expand-all").pf_expand_all(),$(".pf-search").pf_search(),$(".pf-nav-options").pf_nav_options(),$(".pf-nav-metabox").pf_nav_metabox(),$(".pf-page-templates").pf_page_templates(),$(".pf-onload").pf_reload_script(),$(".widget").pf_widgets()})})(jQuery,window,document);